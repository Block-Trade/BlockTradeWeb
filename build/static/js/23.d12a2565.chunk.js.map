{"version":3,"sources":["app/components/auth/Activate.js","app/actions/auth.js"],"names":["connect","state","auth","activateUser","error","msg","history","match","onActivate","a","token","params","push","useEffect","M","toast","html","classes","clearError","className","style","marginTop","display","margin","src","require","alt","textAlign","disabled","onClick","signup","formData","dispatch","headers","axios","post","res","console","log","data","message","type","payload","response","body","loadUser","localStorage","setAuthToken","get","login","companyInfo","companyFormData","clearMsg"],"mappings":"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","file":"static/js/23.d12a2565.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { activateUser, clearError } from '../../actions/auth';\r\nimport M from 'materialize-css/dist/js/materialize.min.js';\r\n\r\nconst ActivateForm = ({\r\n  auth: { msg, error },\r\n  history,\r\n  match,\r\n  activateUser,\r\n}) => {\r\n  const onActivate = async () => {\r\n    await activateUser({ token: match.params.token });\r\n    if (!error) {\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (error !== null) {\r\n      M.toast({ html: error, classes: 'red' });\r\n      clearError();\r\n    }\r\n  }, [error]);\r\n\r\n  return (\r\n    <div>\r\n      <div className='d-flex align-items-center auth px-0'>\r\n        <div className='row w-100 mx-0'>\r\n          <div className='col-lg-4 mx-auto' style={{ marginTop: '2rem' }}>\r\n            <div className='auth-form-light text-left py-5 px-4 px-sm-5'>\r\n              <div className='brand-logo'>\r\n                <img\r\n                  style={{ display: 'block', margin: 'auto' }}\r\n                  src={require('./../../../assets/images/712160ae-335c-4b6d-90d6-4c818afb16b2.jpeg')}\r\n                  alt='logo'\r\n                />\r\n              </div>\r\n              <div className='card-content' style={{ textAlign: 'center' }}>\r\n                <span className='card-title'>Account activation</span>\r\n                <p>\r\n                  Welcome to BlockTrade. Be a part of our family and start\r\n                  trading in a secure and faster way.\r\n                </p>\r\n              </div>\r\n              <button\r\n                disabled={error !== null}\r\n                onClick={onActivate}\r\n                className='btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn'\r\n              >\r\n                Activate\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { activateUser })(ActivateForm);\r\n","import axios from 'axios';\r\nimport setAuthToken from '../utils/setAuthToken';\r\n\r\nexport const signup = ({ formData }) => async (dispatch) => {\r\n  try {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n    const res = await axios.post('/signup', formData, {\r\n      headers: headers,\r\n    });\r\n    console.log(res.data.message);\r\n\r\n    dispatch({\r\n      type: 'SIGNUP_SUCCESS',\r\n      payload: res.data.message,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: 'SIGNUP_ERROR',\r\n      payload: err.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\nexport const activateUser = ({ token }) => async (dispatch) => {\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n  console.log(token);\r\n  const body = {\r\n    token,\r\n  };\r\n  try {\r\n    const res = await axios.post('/activate', body, {\r\n      headers: headers,\r\n    });\r\n    console.log(res.data.msg);\r\n    dispatch({\r\n      type: 'ACTIVATE_SUCCESS',\r\n      payload: res.data.msg,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: 'ACTIVATE_ERROR',\r\n      payload: err.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\nexport const loadUser = () => async (dispatch) => {\r\n  // @todo - load token into global header\r\n  console.log('Load user');\r\n  if (localStorage.token) {\r\n    console.log(localStorage.token);\r\n    setAuthToken({ token: localStorage.token });\r\n  }\r\n  try {\r\n    const res = await axios.get('/login');\r\n    console.log(res);\r\n    dispatch({\r\n      type: 'USER_LOADED',\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: 'AUTH_ERROR',\r\n    });\r\n  }\r\n};\r\n\r\nexport const login = ({ formData, loadUser }) => async (dispatch) => {\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post('/login', formData, {\r\n      headers: headers,\r\n    });\r\n    console.log(res);\r\n    dispatch({\r\n      type: 'LOGIN_SUCCESS',\r\n      payload: res.data,\r\n    });\r\n    await loadUser();\r\n  } catch (err) {\r\n    console.log(err.response.data.msg);\r\n    dispatch({\r\n      type: 'LOGIN_ERROR',\r\n      payload: err.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\nexport const companyInfo = (companyFormData) => async (dispatch) => {\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post('/companyInfo', companyFormData, {\r\n      headers: headers,\r\n    });\r\n\r\n    console.log(res);\r\n    dispatch({\r\n      type: 'COMPANY_INFO_LOADED',\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {}\r\n};\r\n\r\nexport const clearMsg = () => async (dispatch) => {\r\n  dispatch({\r\n    type: 'CLEAR_MSG',\r\n  });\r\n};\r\n\r\nexport const clearError = () => async (dispatch) => {\r\n  dispatch({\r\n    type: 'CLEAR_ERROR',\r\n  });\r\n};\r\n"],"sourceRoot":""}