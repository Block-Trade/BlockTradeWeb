(this["webpackJsonpblock-trade"]=this["webpackJsonpblock-trade"]||[]).push([[21],{1045:function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(44),c=n(76),s=n(0),i=n.n(s),u=n(33),l=n(627),p=n(39),f=n(651),d=n(845),m=n(842);function h(e){return i.a.createElement(m.a,Object.assign({elevation:6,variant:"filled"},e))}t.default=Object(p.b)((function(e){return{auth:e.auth}}),{login:f.f,clearError:f.b,clearMsg:f.c,loadUser:f.e})((function(e){var t=e.auth,a=t.user,p=(t.msg,t.error),f=t.isAuthenticated,m=e.history,v=e.login,y=e.loadUser,g=e.clearError,b=e.clearMsg,E=Object(s.useState)(""),x=Object(c.a)(E,2),O=x[0],k=x[1],j=Object(s.useState)(""),w=Object(c.a)(j,2),N=w[0],S=w[1],C=i.a.useState(!1),R=Object(c.a)(C,2),A=R[0],T=R[1],D=i.a.useState("error"),_=Object(c.a)(D,2),U=_[0],L=_[1],I=i.a.useState(""),G=Object(c.a)(I,2),M=G[0],H=G[1];Object(s.useEffect)((function(){f&&a?(H("Login Successful"),L("success"),T(!0),b(),a&&(""===a.companyName?m.push("/company-info"):!1===a.kycStatus?m.push("/kyc"):m.push("/dashboard"))):p&&(H(p),L("error"),T(!0),g())}),[f]),Object(s.useEffect)((function(){localStorage.token&&!a&&y()}),[]);var P=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==O&&""!==N){e.next=7;break}H("Please fill all the fields"),L("warning"),T(!0),e.next=11;break;case 7:return n={username:O,password:N},e.next=10,v({formData:n,loadUser:y});case 10:f?(H("Login Successful"),L("success"),T(!0),""===a.companyName?m.push("/company-info"):!1===a.kycStatus?m.push("/kyc"):m.push("/dashboard")):(H(p),L("error"),T(!0));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e,t){"clickaway"!==t&&T(!1)};return i.a.createElement("div",null,i.a.createElement("div",{className:"d-flex align-items-center auth px-0"},i.a.createElement("div",{className:"row w-100 mx-0"},i.a.createElement("div",{className:"col-lg-4 mx-auto"},i.a.createElement("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5"},i.a.createElement("div",{className:"brand-logo"},i.a.createElement("img",{style:{display:"block",margin:"auto"},src:n(289),alt:"logo"})),i.a.createElement("h4",null,"Hello Traders! let's get started"),i.a.createElement("h6",{className:"font-weight-light"},"Sign in to continue."),i.a.createElement(l.a,{className:"pt-3"},i.a.createElement(l.a.Group,{className:"d-flex search-field"},i.a.createElement(l.a.Control,{type:"text",placeholder:"Username",size:"lg",className:"h-auto",value:O,onChange:function(e){return k(e.target.value)}})),i.a.createElement(l.a.Group,{className:"d-flex search-field"},i.a.createElement(l.a.Control,{type:"password",placeholder:"Password",size:"lg",className:"h-auto",value:N,onChange:function(e){return S(e.target.value)}})),i.a.createElement("div",{className:"mt-3"},i.a.createElement("button",{className:"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",onClick:P},"LOGIN")),i.a.createElement("div",{className:"my-2 d-flex justify-content-between align-items-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("label",{className:"form-check-label text-muted"},i.a.createElement("input",{type:"checkbox",className:"form-check-input"}),i.a.createElement("i",{className:"input-helper"}),"Keep me signed in")),i.a.createElement("a",{href:"!#",onClick:function(e){return e.preventDefault()},className:"auth-link text-black"},"Forgot password?")),i.a.createElement("div",{className:"text-center mt-4 font-weight-light"},"Don't have an account?",i.a.createElement(u.b,{to:"/register",className:"text-primary"},"Create"))),i.a.createElement(d.a,{open:A,autoHideDuration:4e3,onClose:z,anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.a.createElement(h,{onClose:z,severity:U},M)))))))}))},651:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h}));var a=n(19),r=n.n(a),o=n(44),c=n(53),s=n.n(c),i=n(162),u=function(e){var t=e.formData;return function(){var e=Object(o.a)(r.a.mark((function e(n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={"Content-Type":"application/json"},e.next=4,s.a.post("/signup",t,{headers:a});case 4:o=e.sent,console.log(o.data.message),n({type:"SIGNUP_SUCCESS",payload:o.data.message}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:"SIGNUP_ERROR",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},l=function(e){var t=e.token;return function(){var e=Object(o.a)(r.a.mark((function e(n){var a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={"Content-Type":"application/json"},console.log(t),o={token:t},e.prev=3,e.next=6,s.a.post("/activate",o,{headers:a});case 6:c=e.sent,console.log(c.data.msg),n({type:"ACTIVATE_SUCCESS",payload:c.data.msg}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),n({type:"ACTIVATE_ERROR",payload:e.t0.response.data.msg});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Load user"),localStorage.token&&(console.log(localStorage.token),Object(i.a)({token:localStorage.token})),e.prev=2,e.next=5,s.a.get("/login");case 5:n=e.sent,console.log(n),t({type:"USER_LOADED",payload:n.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:"AUTH_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.formData,n=e.loadUser;return function(){var e=Object(o.a)(r.a.mark((function e(a){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={"Content-Type":"application/json"},e.prev=1,e.next=4,s.a.post("/login",t,{headers:o});case 4:return c=e.sent,console.log(c),a({type:"LOGIN_SUCCESS",payload:c.data}),e.next=9,n();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response.data.msg),a({type:"LOGIN_ERROR",payload:e.t0.response.data.msg});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"Content-Type":"application/json"},t.prev=1,t.next=4,s.a.post("/companyInfo",e,{headers:a});case 4:o=t.sent,console.log(o),n({type:"COMPANY_INFO_LOADED",payload:o.data}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},m=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CLEAR_MSG"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CLEAR_ERROR"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},766:function(e,t,n){"use strict";var a=n(2),r=n(645),o=n(631),c=n(0),s=(n(22),n(1006)),i=n(673),u=n(707),l=n(643);function p(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var f={entering:{opacity:1,transform:p(1)},entered:{opacity:1,transform:"none"}},d=c.forwardRef((function(e,t){var n=e.children,d=e.disableStrictModeCompat,m=void 0!==d&&d,h=e.in,v=e.onEnter,y=e.onEntered,g=e.onEntering,b=e.onExit,E=e.onExited,x=e.onExiting,O=e.style,k=e.timeout,j=void 0===k?"auto":k,w=e.TransitionComponent,N=void 0===w?s.a:w,S=Object(o.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),C=c.useRef(),R=c.useRef(),A=Object(i.a)(),T=A.unstable_strictMode&&!m,D=c.useRef(null),_=Object(l.a)(n.ref,t),U=Object(l.a)(T?D:void 0,_),L=function(e){return function(t,n){if(e){var a=T?[D.current,t]:[t,n],o=Object(r.a)(a,2),c=o[0],s=o[1];void 0===s?e(c):e(c,s)}}},I=L(g),G=L((function(e,t){Object(u.b)(e);var n,a=Object(u.a)({style:O,timeout:j},{mode:"enter"}),r=a.duration,o=a.delay;"auto"===j?(n=A.transitions.getAutoHeightDuration(e.clientHeight),R.current=n):n=r,e.style.transition=[A.transitions.create("opacity",{duration:n,delay:o}),A.transitions.create("transform",{duration:.666*n,delay:o})].join(","),v&&v(e,t)})),M=L(y),H=L(x),P=L((function(e){var t,n=Object(u.a)({style:O,timeout:j},{mode:"exit"}),a=n.duration,r=n.delay;"auto"===j?(t=A.transitions.getAutoHeightDuration(e.clientHeight),R.current=t):t=a,e.style.transition=[A.transitions.create("opacity",{duration:t,delay:r}),A.transitions.create("transform",{duration:.666*t,delay:r||.333*t})].join(","),e.style.opacity="0",e.style.transform=p(.75),b&&b(e)})),z=L(E);return c.useEffect((function(){return function(){clearTimeout(C.current)}}),[]),c.createElement(N,Object(a.a)({appear:!0,in:h,nodeRef:T?D:void 0,onEnter:G,onEntered:M,onEntering:I,onExit:P,onExited:z,onExiting:H,addEndListener:function(e,t){var n=T?e:t;"auto"===j&&(C.current=setTimeout(n,R.current||0))},timeout:"auto"===j?null:j},S),(function(e,t){return c.cloneElement(n,Object(a.a)({style:Object(a.a)({opacity:0,transform:p(.75),visibility:"exited"!==e||h?void 0:"hidden"},f[e],O,n.props.style),ref:U},t))}))}));d.muiSupportAuto=!0,t.a=d}}]);
//# sourceMappingURL=21.acba0593.chunk.js.map